{% extends "base.html" %}
{% load static %}
{%block extra_css%}

<link rel="stylesheet" href="{% static '/css/ocplayer.min.css' %}">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
<style>
    .video-imagen > img {
        height: 100%;
        width: 78%;
    }
</style>
{%endblock%}
{% block dynamic %}
<div class="container-fluid">
    <div class="d-sm-flex justify-content-between align-items-center mb-4">
        <h3 class="text-dark mb-0">Playlist </h3>
        
        <a class="" role="" href="#"></a></div>
    <div class="row">
        <div class="col-md-12">
                <table id="playlist" class="table table-striped table-bordered" cellspacing="0" width="100%">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Source</th>
                        </tr>
                    </thead>
                    <tbody>
                        
                    </tbody>
                    <tfoot>
                        
                    </tfoot>
                </table>
            
        </div>

        <div id="scheduleModal" class="modal fade" role="dialog">
            <div class="modal-dialog">
        
            <div class="modal-content">
                <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        
            </div>
        </div>
    </div>
    
<div class="row">
    <div class="col-lg-12">
        <!-- <div class="container-player">
            <div id="mediaPlayer">
                <video id='media-video' controls autoplay>
                    <source type='video/mp4'>
                    
                </video>
               
            </div>
            <div id="playlist">  
            </div>
        </div> -->
    </div>
    <div class="col">
        <div class="row">
            
        </div>
    </div>
</div>
</div>
</div>
{%endblock%}

{% block extra_js %}
<!-- <script src="{% static '/js/ojcplayer.min.js' %}"></script> -->
<script>
    $(document).ready(function(){
        var response = JSON.parse(localStorage.getItem('response'));
        var table = $('#playlist').DataTable();
        $.ajax({
                url: '/api/playlist/?org_uuid='+response.organization_uuid,
                method: "GET",
                headers: {
                    "Content-Type": "application/json",
                    "Access-Control-Allow-Origin": "*"
                },
                success: function(data, status){
                    var result = [];
                    data.forEach(function(dd){
                        temp_data = []
                        temp_data.push(dd.id);
                        temp_data.push(`<img style="height: 50%; width: 40%" src='${dd.source}'>`);
                        result.push(temp_data);
                    });
                    table.rows.add(result).draw();
                },
                error: function(data, status, error){
                    alert(error);
                }
        });
    });
 
    // function trans(source){
    //     $('#mediaPlayer video source').stop();
    //     $('#mediaPlayer video source').attr('src', source);
    //     $('#mediaPlayer video source').submit();
    // }
</script>
{%endblock%}